<div class="product_a_plus_container">

  {%- comment -%} Video from metafield (file reference) {%- endcomment -%}
  {% if product.metafields.content.a_plus_video != blank %}
    <div class="a_plus_video_wrapper">
      <video 
        controls 
        playsinline 
        preload="metadata"
        poster="{{ product.featured_image | img_url: '1024x1024' }}">
        <source src="{{ product.metafields.content.a_plus_video | file_url }}" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
  {% endif %}

  {%- comment -%} Images from metafield in masonry style {%- endcomment -%}
  {% if product.metafields.content.show_a_plus != false and product.metafields.content.a_plus.value != blank %}
    <div class="a_plus_images">
      {% for image in product.metafields.content.a_plus.value %}
        <img src="{{ image | img_url: '1024x1024' }}" alt="{{ image.alt | escape }}">
      {% endfor %}
    </div>
  {% endif %}

  {%- comment -%} Shop Now button {%- endcomment -%}
  <div class="a_plus_shopnow">
    <a href="{{ product.url }}" class="shop-now-btn">Shop Now</a>
  </div>

</div>

<style>
  .product_a_plus_container {
    max-width: 80rem;
    margin: 0 auto 52px;
    padding: 0 16px;
  }

  /* Video always full width */
  .a_plus_video_wrapper video {
    width: 100%;
    height: auto;
    border-radius: 6px;
    background: #000;
    margin-bottom: 24px;
    display: block;
  }

  /* Masonry-style images */
  .a_plus_images {
    column-count: 1;
    column-gap: 20px;
    margin-bottom: 24px;
  }
  .a_plus_images img {
    width: 100%;
    height: auto;
    margin-bottom: 20px;
    border-radius: 6px;
    display: block;
    break-inside: avoid;
  }

  /* Desktop masonry (2 cols) */
  @media (min-width: 768px) {
    .a_plus_images {
      column-count: 2;
    }
  }

  /* Shop Now button */
  .a_plus_shopnow {
    text-align: center;
    margin-top: 20px;
  }
  .shop-now-btn {
    background: #085e60; /* accent color */
    color: #fff;
    padding: 14px 32px;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 600;
    display: inline-block;
    transition: opacity 0.3s ease;
  }
  .shop-now-btn:hover {
    opacity: 0.9;
  }
</style>

{% schema %}
{
  "name": "Product A Plus",
  "settings": [],
  "presets": [
    {
      "name": "Product A Plus"
    }
  ]
}
{% endschema %}
